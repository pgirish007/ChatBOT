<!-- Generated by Copilot -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sample Page with Header and Footer</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }
        header, footer {
            background-color: #333;
            color: #fff;
            padding: 1em 2em;
            text-align: center;
        }
        main {
            padding: 2em;
            min-height: 300px;
        }
  #sudoku-widget {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 324px;
    background: #fefefe;
    border: 1px solid #ccc;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    padding: 10px;
    z-index: 9999;
    font-family: Arial, sans-serif;
  }

  #sudoku-header {
    font-weight: bold;
    text-align: center;
    margin-bottom: 10px;
    color: #333;
  }

  #sudoku {
    display: grid;
    grid-template-columns: repeat(9, 1fr);
    gap: 2px;
  }

  .cell {
    width: 28px;
    height: 28px;
    text-align: center;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 3px;
  }

  .cell.fixed {
    background-color: #eee;
    font-weight: bold;
  }

  .cell.error {
    border: 2px solid red;
    background-color: #ffe6e6;
  }

  #sudoku-controls {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
  }

  #sudoku-controls button {
    flex: 1;
    margin: 0 2px;
    padding: 5px;
    font-size: 12px;
    border: none;
    border-radius: 5px;
    background: #007bff;
    color: white;
    cursor: pointer;
  }

  #sudoku-controls button:hover {
    background: #0056b3;
  }
</style>
<script>
  let PUZZLE = [];

  function generatePuzzle() {
    PUZZLE = generateSudoku(); // ðŸ†• generate new puzzle

    const board = document.getElementById("sudoku");
    board.innerHTML = "";

    for (let row = 0; row < 9; row++) {
      for (let col = 0; col < 9; col++) {
        const input = document.createElement("input");
        input.type = "text";
        input.maxLength = 1;
        input.className = "cell";
        input.dataset.row = row;
        input.dataset.col = col;

        if (PUZZLE[row][col] !== 0) {
          input.value = PUZZLE[row][col];
          input.disabled = true;
          input.classList.add("fixed");
        }

        if (col % 3 === 0) input.style.borderLeft = "2px solid #333";
        if (row % 3 === 0) input.style.borderTop = "2px solid #333";
        if (col === 8) input.style.borderRight = "2px solid #333";
        if (row === 8) input.style.borderBottom = "2px solid #333";

        input.addEventListener("input", (e) => {
          const val = e.target.value;
          if (!/^[1-9]$/.test(val)) e.target.value = "";
        });

        input.addEventListener("blur", validateCell);
        board.appendChild(input);
      }
    }
  }

  function generateSudoku() {
    const grid = Array.from({ length: 9 }, () => Array(9).fill(0));
    fillDiagonalBoxes(grid);
    solveSudoku(grid);
    const puzzle = removeCells(grid, 40); // remove 40 cells for medium difficulty
    return puzzle;
  }

  function fillDiagonalBoxes(grid) {
    for (let i = 0; i < 9; i += 3) {
      fillBox(grid, i, i);
    }
  }

  function fillBox(grid, row, col) {
    const nums = shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9]);
    for (let i = 0; i < 3; i++) {
      for (let j = 0; j < 3; j++) {
        grid[row + i][col + j] = nums[i * 3 + j];
      }
    }
  }

  function isSafe(grid, row, col, num) {
    for (let x = 0; x < 9; x++) {
      if (grid[row][x] === num || grid[x][col] === num) return false;
    }

    const startRow = row - row % 3, startCol = col - col % 3;
    for (let i = 0; i < 3; i++) {
      for (let j = 0; j < 3; j++) {
        if (grid[i + startRow][j + startCol] === num) return false;
      }
    }

    return true;
  }

  function solveSudoku(grid) {
    for (let row = 0; row < 9; row++) {
      for (let col = 0; col < 9; col++) {
        if (grid[row][col] === 0) {
          for (let num = 1; num <= 9; num++) {
            if (isSafe(grid, row, col, num)) {
              grid[row][col] = num;
              if (solveSudoku(grid)) return true;
              grid[row][col] = 0;
            }
          }
          return false;
        }
      }
    }
    return true;
  }

  function removeCells(grid, count) {
    const puzzle = grid.map(row => row.slice()); // deep copy
    let removed = 0;
    while (removed < count) {
      const row = Math.floor(Math.random() * 9);
      const col = Math.floor(Math.random() * 9);
      if (puzzle[row][col] !== 0) {
        puzzle[row][col] = 0;
        removed++;
      }
    }
    return puzzle;
  }

  function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  // ... rest of the code remains unchanged:
  // validateCell, checkSolution, getGridFromInputs, etc...

  function validateCell(e) {
    const input = e.target;
    const row = parseInt(input.dataset.row);
    const col = parseInt(input.dataset.col);
    const value = parseInt(input.value);

    if (!value || value < 1 || value > 9) {
      input.classList.remove("error");
      return;
    }

    const grid = getGridFromInputs();

    const hasConflict = (
      checkDuplicate(grid[row], col, value) ||
      checkDuplicate(grid.map(r => r[col]), row, value) ||
      checkBoxConflict(grid, row, col, value)
    );

    if (hasConflict) {
      input.classList.add("error");
    } else {
      input.classList.remove("error");
    }
  }

  function checkDuplicate(array, excludeIndex, value) {
    return array.some((val, idx) => idx !== excludeIndex && val === value);
  }

  function checkBoxConflict(grid, row, col, value) {
    const boxRow = Math.floor(row / 3) * 3;
    const boxCol = Math.floor(col / 3) * 3;
    for (let r = boxRow; r < boxRow + 3; r++) {
      for (let c = boxCol; c < boxCol + 3; c++) {
        if (r === row && c === col) continue;
        if (grid[r][c] === value) return true;
      }
    }
    return false;
  }

  function getGridFromInputs() {
    const cells = document.querySelectorAll(".cell");
    const grid = Array.from({ length: 9 }, () => Array(9).fill(0));
    for (let cell of cells) {
      const row = parseInt(cell.dataset.row);
      const col = parseInt(cell.dataset.col);
      const value = parseInt(cell.value) || 0;
      grid[row][col] = value;
    }
    return grid;
  }

  function checkSolution() {
    const grid = getGridFromInputs();
    if (isValidSudoku(grid)) {
      alert("ðŸŽ‰ Great job! Solution looks good.");
    } else {
      alert("âŒ Not quite right. Check rows, columns, and boxes.");
    }
  }

function isValidSudoku(grid) {
  const isValid = (arr) => {
    const seen = new Set();
    for (let num of arr) {
      if (num === 0) return false;  // ðŸ†• ADD THIS LINE
      if (seen.has(num)) return false;
      seen.add(num);
    }
    return true;
  };

  for (let i = 0; i < 9; i++) {
    const row = grid[i];
    const col = grid.map(r => r[i]);
    if (!isValid(row) || !isValid(col)) return false;
  }

  for (let r = 0; r < 9; r += 3) {
    for (let c = 0; c < 9; c += 3) {
      const box = [];
      for (let i = 0; i < 3; i++) {
        for (let j = 0; j < 3; j++) {
          box.push(grid[r + i][c + j]);
        }
      }
      if (!isValid(box)) return false;
    }
  }

  return true;
}


  function clearBoard() {
    const cells = document.querySelectorAll(".cell:not(.fixed)");
    cells.forEach(cell => {
      cell.value = "";
      cell.classList.remove("error");
    });
  }

  generatePuzzle(); // initial call
</script>
</head>
<body>
    <header>
        <h1>Sudoku Game</h1>
    </header>
    <main>
        <p>Welcome to the Sudoku Game! Enjoy solving puzzles and improving your skills.</p>
    </main>
    <footer>
        <!-- âœ… Add this HTML anywhere in your page body -->
<div id="sudoku-widget">
  <div id="sudoku-header">ðŸ§  Sudoku Break</div>
  <div id="sudoku"></div>
  <div id="sudoku-controls">
    <button onclick="generatePuzzle()">New Puzzle</button>
    <button onclick="clearBoard()">Clear</button>
    <button onclick="checkSolution()">Check</button>
  </div>
</div>

        &copy; 2024 Sudoku Game. All rights reserved.
    </footer>
</body>
</html>